From 541ed0762e9390751ca45ccbc341a878a3c9688f Mon Sep 17 00:00:00 2001
From: Marcus Comstedt <marcus@mc.pp.se>
Date: Tue, 9 Apr 2019 22:35:54 +0200
Subject: [PATCH 2/2] build: Recognize more 64-bit Linux as "linux64"

---
 .../main/java/ghidra/framework/Architecture.java  |  2 ++
 .../src/main/java/ghidra/framework/Platform.java  | 15 +++++++++++++++
 build.gradle                                      |  4 +++-
 3 files changed, 20 insertions(+), 1 deletion(-)

diff --git a/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Architecture.java b/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Architecture.java
index 1ed37dd..471a1f4 100644
--- a/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Architecture.java
+++ b/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Architecture.java
@@ -21,6 +21,8 @@ public enum Architecture {
 	X86_64("x86_64", "amd64"),
 	POWERPC("ppc"),
 	POWERPC_64("ppc64"),
+	POWERPC_64LE("ppc64le"),
+	ARM_64("aarch64"),
 	UNKNOWN("Unknown Architecture");
 
 	/**
diff --git a/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Platform.java b/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Platform.java
index 8a4c54b..c62709f 100644
--- a/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Platform.java
+++ b/Ghidra/Framework/Generic/src/main/java/ghidra/framework/Platform.java
@@ -50,6 +50,21 @@ public enum Platform {
 	 */
 	LINUX_64(OperatingSystem.LINUX, Architecture.X86_64, "linux64", ".so", ""),
 
+	/**
+	 * Identifies a Linux OS.
+	 */
+	LINUX_64_PPC(OperatingSystem.LINUX, Architecture.POWERPC_64, "linux64", ".so", ""),
+
+	/**
+	 * Identifies a Linux OS.
+	 */
+	LINUX_64_PPCLE(OperatingSystem.LINUX, Architecture.POWERPC_64LE, "linux64", ".so", ""),
+
+	/**
+	 * Identifies a Linux OS.
+	 */
+	LINUX_64_ARM(OperatingSystem.LINUX, Architecture.ARM_64, "linux64", ".so", ""),
+
 	/**
 	 * Identifies a Linux OS, the architecture for which we do not know or have not encountered
 	 */
diff --git a/build.gradle b/build.gradle
index c3eb0ef..2eb6b8b 100644
--- a/build.gradle
+++ b/build.gradle
@@ -261,6 +261,8 @@ String getCurrentPlatformName() {
 		
 	boolean isX86_32 = archName.equals("x86") || archName.equals("i386");
 	boolean isX86_64 = archName.equals("x86_64") || archName.equals("amd64");
+	boolean isPPC64 = archName.equals("ppc64") || archName.equals("ppc64le")
+	boolean isAARCH64 = archName.equals("aarch64")
 
 	if (osName.startsWith("Windows")) {
 		if (isX86_32) {
@@ -271,7 +273,7 @@ String getCurrentPlatformName() {
 		}
 	}
 	else if (osName.startsWith("Linux")) {
-		if (isX86_64) {
+		if (isX86_64 || isPPC64 || isAARCH64) {
 			return 'linux64'
 		}
 	}
-- 
2.19.2

